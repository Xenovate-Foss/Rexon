{
  "name": "PaperMC",
  "shortName": "papermc",
  "description": "The PaperMC server software for Minecraft: Java Edition.",
  "dockerImage": "ghcr.io/argon-foss/images:java_21",
  "defaultStartupCommand": "java -jar %jarfile%",
  "configFiles": [],
  "environmentVariables": [
    {
      "name": "version",
      "description": "The version of PaperMC you want!",
      "defaultValue": "latest",
      "required": true,
      "userViewable": true,
      "userEditable": true,
      "rules": "string"
    },
    {
      "name": "build",
      "description": "The build number of PaperMC.",
      "defaultValue": "latest",
      "required": true,
      "userViewable": true,
      "userEditable": true,
      "rules": "string"
    },
    {
      "name": "jarfile",
      "description": "The name of the downloaded JAR file.",
      "defaultValue": "server.jar",
      "required": true,
      "userViewable": true,
      "userEditable": true,
      "rules": "string"
    }
  ],
  "installScript": {
    "dockerImage": "ghcr.io/argon-foss/images:debian",
    "entrypoint": "bash",
    "script": "PROJECT=paper; version=${version:-$(curl -s https://api.papermc.io/v2/projects/$PROJECT | jq -r '.versions[-1]')}; build=${build:-$(curl -s https://api.papermc.io/v2/projects/$PROJECT/versions/$version | jq -r '.builds[-1]')}; jarfile=$PROJECT-%version%-%build%.jar; DOWNLOAD_URL=https://api.papermc.io/v2/projects/$PROJECT/versions/%version%/builds/%build%/downloads/%jarfile%; cd /mnt/server; echo -e \"Running curl -o %jarfile% %DOWNLOAD_URL%\"; [ -f %jarfile% ] && mv %jarfile% %jarfile%.old; curl -o %jarfile% %DOWNLOAD_URL%; [ ! -f server.properties ] && echo -e \"Downloading MC server.properties\" && curl -o server.properties https://raw.githubusercontent.com/ptero-eggs/game-eggs/main/minecraft/java/server.properties && chmod +x %jarfile%"
  },
  "startup": {
    "userEditable": false
  }
}